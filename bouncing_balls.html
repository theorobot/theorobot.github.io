<html>
<head>
	<style>
      canvas {background: #eee; display: block; margin: 0 auto;}
    </style>
			<link href="slides.css" rel="stylesheet" type="text/css"/>
</head>

<script type="text/javascript">
	function getRndInt(min, max) {
	    return Math.floor(Math.random() * (max - min)) + min;
	}

	function getRndFloat(min, max) {
	    return (Math.random() * (max - min)) + min;
	}

	function findDistance(x1, y1, x2, y2) {
	    return (Math.sqrt((Math.abs((x2 - x1) * (x2 - x1))) + 
             (Math.abs((y2 - y1) * (y2 - y1)))));
	}

	function randomColor(r, g, b) {
	    return "rgb("+r+","+g+","+b+")";
	}

	function drawCircle(c,x, y, radius, color) {
	    c.beginPath();
	    c.fillStyle = color;
	    c.arc(x, y, radius, 0, Math.PI * 2);
	    c.fill();
	    c.closePath();
	}
</script>

<title>Bouncing balls</title>

<body onload="oneDInit()">

<div class = "slideshow-container">

<div class="slide">
	<h1>Collision in 1D</h1>
    <canvas id="Canvas1d" width="720" height="480">
      <script type="text/javascript">
				let canvas, ctx, numBalls = 5,  stop1;
				var b = [];
				function oneDInit() {
	 				canvas = document.getElementById("Canvas1d");
	 				ctx = canvas.getContext("2d")

					for (i = 0; i < numBalls; i++) {
	    			var ball = {x: getRndInt(20, 700), 
                        y: canvas.height / 2, 
                        speed: getRndInt(1, 4), 
                        radius: 10};
	    			b.push(ball);
					}
					stop1 = false;
					document.addEventListener('keydown', onclick, false);
					window.requestAnimationFrame(main);
				}


	function checkCollisions() {
	    for (i = 0; i < numBalls; i++) {	
		if ((b[i].x > canvas.width - (b[i].radius * 2)) || (b[i].x < (b[i].radius * 2))) {
		    b[i].speed *= -1;
		}
		for (j = (i + 1); j < numBalls; j++) {
		    distance = findDistance(b[i].x, b[i].y, b[j].x, b[j].y);
		    if (distance < (b[i].radius + b[j].radius)) {
			var oldBiSpeed = b[i].speed;
			b[i].speed = b[j].speed;
			b[j].speed = oldBiSpeed;
		    }
		}
	    }
	}

	function main() {
	    ctx.clearRect(0, 0, canvas.width, canvas.height);
	    for (i = 0; i < numBalls; i++) {
		drawCircle(ctx, b[i].x, b[i].y, b[i].radius, b[i].color);
		b[i].x += b[i].speed;
	    }
	    checkCollisions();
			if (!stop1) {
	    	window.requestAnimationFrame(main);
			}
	}
	function onClick(event) {
		stop1 = !stop1;
		if (!stop1) {
			window.requestAnimationFrame(main);
		}
	}
	
      </script>
    </canvas>
</div>

<div class="slide">
	<h1>Collision in 2D</h1>
    <canvas id="Canvas2d" width="720" height="480">
      <script type="text/javascript">
	var canvas2 = document.getElementById("Canvas2d");

	var numBalls2 = 20;
	let balls = [];
	for (i=0; i < numBalls2; i++) {
	    ball2 = {x: getRndInt(10, 710), y: getRndInt(20, 460), speed: getRndInt(1, 5), angle: getRndFloat(0, (2 * Math.PI)), radius: 10, color: randomColor(getRndInt(0, 255), getRndInt(0, 255), getRndInt(0, 255))}
	    balls.push(ball2);
	}
	var stop = false;
	document.addEventListener('click', onclick, false)

	function collision2d() {
	    for (i = 0; i < numBalls2; i++) {
		if ((balls[i].x) > (canvas.width - (balls[i].radius)) || ((balls[i].x) < (balls[i].radius))) {
		    balls[i].angle = (Math.PI - (balls[i].angle));
		}
		if ((balls[i].y) > (canvas.height - (balls[i].radius)) || ((balls[i].y) < (balls[i].radius))) {
		    balls[i].angle = (Math.PI  - balls[i].angle);
		    balls[i].speed *= -1;
		}
	    }
	}

	function main2() {
	 	  ctx2 = canvas2.getContext("2d")
	    ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
	    if (!stop) {
		for (i = 0; i < numBalls2; i++) {
		    drawCircle(ctx2, balls[i].x, balls[i].y, balls[i].radius, balls[i].color)
		    balls[i].x += (balls[i].speed*(Math.cos(balls[i].angle)));
		    balls[i].y += (balls[i].speed*(Math.sin(balls[i].angle)));
		}
	    }
	    collision2d();
	    window.requestAnimationFrame(main2);
	}

	function onclick(event) {
	    stop = !stop;
	    if (!stop) {
		window.requestAnimationFrame(main2);
	    }
	}
      </script>
    </canvas>
</div>
<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
<a class="next" onclick="plusSlides(1)">&#10095;</a>
</div>

<div style="text-align:center">
  <span class="dot" onclick="currentSlide(1)"></span>
  <span class="dot" onclick="currentSlide(2)"></span>
</div>

<script src="slides.js"></script>
  </body>
</html>

