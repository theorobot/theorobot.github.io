<html>
  <head>
    <title>Fractal Tree</title>
  </head>
  <body>
    <canvas id="myCanvas" width="960" height="720">
      <script>
	var canvas = document.getElementById("myCanvas")
	var ctx = canvas.getContext("2d")

	var line = []
	var branches = []
	var i = 0

	initiate()

	function getRndInt(min, max) {
	    return (Math.random() * (max - min)) + min
	}

  function getRndGreen() {
    let color = '#00'
    let green = Math.floor(getRndInt(20, 220))
    color += green.toString(16)
    color += '00'
    return color
  }

	function Line(x1, y1, x2, y2, width, color) {
      ctx.beginPath()
	    ctx.lineWidth = width
	    ctx.moveTo(x1, y1)
	    ctx.lineTo(x2, y2)
      ctx.strokeStyle = color 
	    ctx.stroke()
	}

	function drawLine(x1, y1, x2, y2, width, color) {
	    Line(x1, y1, x2, y2, width, color)
	}
	
	function initiate() {
	    for(i = 0; i < 150; i++) {
		makeBranch(getRndInt(50, canvas.width - 50), getRndInt(600, 700), getRndInt(50, 300), 270, '#380b00')
	    }
	}

	function makeBranch(startx, starty, length, angle, color) {
	    var x2 = startx + length * Math.cos(angle * Math.PI / 180)
	    var y2 = starty + length * Math.sin(angle * Math.PI / 180)
	    drawLine(startx, starty, x2, y2, length / 50, color)
      color = getRndGreen() 
	    if(length > getRndInt(10, 20)) {
		    setTimeout(makeBranch, 50, x2, y2, length / 2, angle - getRndInt(55, 5),  color)
	    }
	    if(length > getRndInt(10, 20)) {
		    setTimeout(makeBranch, 50, x2, y2, length / 2, angle + getRndInt(5, 55),  color)
	    }
	    if(length > getRndInt(30, 60)) {
		   setTimeout(makeBranch, 50, x2, y2, length / 2, angle + getRndInt(-40, -10),  color)
	    }
	    if(length > getRndInt(30, 60)) {
		    setTimeout(makeBranch, 50, x2, y2, length / 2, angle + getRndInt(40, 10),  color)
	    }
	    if(length > getRndInt(80, 120)) {
		    setTimeout(makeBranch, 50, x2, y2, length / 2, angle + getRndInt(-20, 20),  '#591200')
	    } 
	}
      </script>
    </canvas>
  </body>
</html>
